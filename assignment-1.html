<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>程式教學</title>
    <!-- Ionic CDN -->
    <script
      type="module"
      src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.esm.js"
    ></script>
    <script
      nomodule
      src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.js"
    ></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@ionic/core/css/ionic.bundle.css"
    />
    <style>
      ion-content {
        --padding-top: 0;
      }
      .item-content {
        width: 100%;
        display: flex;
        flex-direction: column;
        gap: 0.3rem;
      }
      .item-title {
        font-weight: bold;
        font-size: 1.1em;
        margin-bottom: 0.1rem;
      }
      .item-subtitle {
        color: var(--ion-color-medium);
        font-size: 0.95em;
      }
      .item-details {
        font-size: 0.98em;
        color: #444;
      }
      .tag-container {
        display: flex;
        flex-wrap: wrap;
        gap: 0.4rem;
        margin-top: 0.2rem;
      }
      .media-container {
        margin-top: 0.5rem;
        display: flex;
        gap: 1.5rem;
        align-items: flex-start;
        flex-wrap: wrap;
        width: 100%;
      }
      .media-img {
        width: 120px;
        min-width: 90px;
        height: 80px;
        object-fit: cover;
        border-radius: 8px;
        border: 1px solid #eee;
        flex-shrink: 0;
        background: #f8f8f8;
      }
      .media-video {
        flex: 1 1 220px;
        max-width: 420px;
        aspect-ratio: 16/9;
        border-radius: 10px;
        border: 1px solid #eee;
        background: #000;
        margin-left: 0;
      }
      .media-iframe {
        flex: 1 1 220px;
        max-width: 420px;
        aspect-ratio: 16/9;
        border-radius: 10px;
        border: 1px solid #eee;
        background: #000;
        margin-left: 0;
      }
      @media (max-width: 600px) {
        .media-container {
          flex-direction: column;
          align-items: stretch;
          gap: 0.7rem;
        }
        .media-img {
          width: 100%;
          max-width: 100vw;
          height: 120px;
        }
        .media-video,
        .media-iframe {
          width: 100%;
          max-width: 100vw;
          min-width: 0;
          aspect-ratio: 16/9;
        }
      }
      @media (min-width: 601px) and (max-width: 1024px) {
        .media-container {
          flex-direction: row;
          align-items: flex-start;
          gap: 1.2rem;
        }
        .media-img {
          width: 120px;
          height: 90px;
        }
        .media-video,
        .media-iframe {
          max-width: 320px;
          aspect-ratio: 16/9;
        }
      }
      @media (min-width: 1025px) {
        .media-container {
          flex-direction: row;
          align-items: flex-start;
          gap: 2rem;
        }
        .media-img {
          width: 140px;
          height: 100px;
        }
        .media-video,
        .media-iframe {
          max-width: 480px;
          aspect-ratio: 16/9;
        }
      }
    </style>
  </head>
  <body>
    <ion-app>
      <ion-header>
        <ion-toolbar>
          <ion-title>
            程式教學
          </ion-title>
        </ion-toolbar>
        <ion-searchbar placeholder="搜尋..."></ion-searchbar>
        <ion-item>
          <ion-select label="分類" interface="popover"></ion-select>
        </ion-item>
      </ion-header>
      <ion-content>
        <ion-list></ion-list>
      </ion-content>
    </ion-app>
    <script>
      // 資料初始化（20 筆，內容合理且有意義）
      const items = [
        {
          title: "Python 基礎入門",
          language: "Python 3",
          level: "入門",
          details:
            "從零開始學習 Python 程式設計，包含變數、流程控制、函式等基礎概念。",
          category: "程式入門",
          tags: ["Python", "程式設計", "入門課程"],
          imageUrl:
            "https://images.weserv.nl/?url=i.ytimg.com/vi/pD4Ga6aIN0c/maxresdefault.jpg&w=800&h=800&fit=contain&output=jpg&q=85&il&n=-1",
          videoUrl: "https://www.youtube.com/watch?v=pD4Ga6aIN0c",
        },
        {
          title: "JavaScript 前端開發",
          language: "JavaScript",
          level: "入門",
          details: "學習網頁互動、DOM 操作與 ES6 語法。",
          category: "前端開發",
          tags: ["JavaScript", "網頁", "前端"],
          imageUrl:
            "https://images.weserv.nl/?url=i.ytimg.com/vi/0FLkwZ-PH2I/maxresdefault.jpg&w=800&h=800&fit=contain&output=jpg&q=85&il&n=-1",
          videoUrl: "https://www.youtube.com/watch?v=0FLkwZ-PH2I",
        },
        {
          title: "React 基礎實作",
          language: "JavaScript",
          level: "進階",
          details: "掌握 React 元件、props、state 與生命週期。",
          category: "前端開發",
          tags: ["React", "前端", "元件化"],
          imageUrl:
            "https://images.weserv.nl/?url=i.ytimg.com/vi/aBTiZfShe-4/maxresdefault.jpg&w=800&h=800&fit=contain&output=jpg&q=85&il&n=-1",
          videoUrl: "https://www.youtube.com/watch?v=aBTiZfShe-4&t=4321s",
        },
        {
          title: "資料結構與演算法",
          language: "Python 3",
          level: "進階",
          details: "介紹常見資料結構與演算法，提升解題能力。",
          category: "演算法",
          tags: ["資料結構", "演算法", "LeetCode"],
          imageUrl:
            "https://images.weserv.nl/?url=i.ytimg.com/vi/WNN2-jw1EVU/hqdefault.jpg&w=800&h=800&fit=contain&output=jpg&q=85&il&n=-1",
          videoUrl: "https://www.youtube.com/watch?v=WNN2-jw1EVU",
        },
        {
          title: "Android App 開發",
          language: "Kotlin",
          level: "入門",
          details: "使用 Kotlin 開發 Android 行動應用程式。",
          category: "行動開發",
          tags: ["Android", "Kotlin", "App"],
          imageUrl:
            "https://images.weserv.nl/?url=i.ytimg.com/vi/6pJqYvge8TY/sddefault.jpg&w=800&h=800&fit=contain&output=jpg&q=85&il&n=-1",
          videoUrl: "https://www.youtube.com/watch?v=6pJqYvge8TY&list=PLPh5-KovAYtFyX5elSTT9wEMt0HxMhR7L",
        },
        {
          title: "iOS App 開發",
          language: "Swift",
          level: "入門",
          details: "學習 Swift 與 iOS App 開發基礎。",
          category: "行動開發",
          tags: ["iOS", "Swift", "App"],
          imageUrl:
            "https://images.weserv.nl/?url=i.ytimg.com/vi/QEt2EpfaYbs/maxresdefault.jpg&w=800&h=800&fit=contain&output=jpg&q=85&il&n=-1",
          videoUrl: "https://www.youtube.com/watch?v=QEt2EpfaYbs",
        },
        {
          title: "資料庫設計與 SQL",
          language: "SQL",
          level: "入門",
          details: "學習資料庫設計、查詢語法與資料操作。",
          category: "資料庫",
          tags: ["SQL", "資料庫", "查詢"],
          imageUrl:
            "https://images.weserv.nl/?url=i.ytimg.com/vi/19TsIFHaEec/hq720.jpg&w=800&h=800&fit=contain&output=jpg&q=85&il&n=-1",
          videoUrl: "https://www.youtube.com/watch?v=19TsIFHaEec",
        },
        {
          title: "Node.js 後端開發",
          language: "JavaScript",
          level: "進階",
          details: "使用 Node.js 建立 RESTful API 與伺服器應用。",
          category: "後端開發",
          tags: ["Node.js", "API", "後端"],
          imageUrl:
            "https://images.weserv.nl/?url=i.ytimg.com/vi/Lx11PEXpkSU/sddefault.jpg&w=800&h=800&fit=contain&output=jpg&q=85&il&n=-1",
          videoUrl: "https://www.youtube.com/watch?v=Lx11PEXpkSU&list=PL91gvBcdjUtZVtROM5MY-DTlk4pfnqbm_",
        },
        {
          title: "Git 版本控制",
          language: "工具",
          level: "入門",
          details: "學習 Git 基本指令與版本管理流程。",
          category: "工具",
          tags: ["Git", "版本控制", "協作"],
          imageUrl:
            "https://images.weserv.nl/?url=i.ytimg.com/vi/FKXRiAiQFiY/hqdefault.jpg&w=800&h=800&fit=contain&output=jpg&q=85&il&n=-1",
          videoUrl: "https://www.youtube.com/watch?v=FKXRiAiQFiY",
        },
        {
          title: "Linux 系統操作",
          language: "Linux",
          level: "入門",
          details: "掌握 Linux 常用指令與系統管理。",
          category: "系統",
          tags: ["Linux", "系統管理", "命令列"],
          imageUrl:
            "https://images.weserv.nl/?url=i.ytimg.com/vi/qVOCJMBwNXU/maxresdefault.jpg&w=800&h=800&fit=contain&output=jpg&q=85&il&n=-1",
          videoUrl: "https://www.youtube.com/watch?v=qVOCJMBwNXU",
        },
        {
          title: "C++ 程式設計",
          language: "C++",
          level: "入門",
          details: "學習 C++ 基礎語法與物件導向設計。",
          category: "程式入門",
          tags: ["C++", "物件導向", "程式設計"],
          imageUrl:
            "https://images.weserv.nl/?url=i.ytimg.com/vi/NF2rz5jNY5M/maxresdefault.jpg&w=800&h=800&fit=contain&output=jpg&q=85&il&n=-1",
          videoUrl: "https://www.youtube.com/watch?v=NF2rz5jNY5M",
        },
        {
          title: "Java 程式設計",
          language: "Java",
          level: "入門",
          details: "Java 語法、類別、物件與例外處理。",
          category: "程式入門",
          tags: ["Java", "物件導向", "程式設計"],
          imageUrl:
            "https://images.weserv.nl/?url=i.ytimg.com/vi/evIGdOzKCYk/maxresdefault.jpg&w=800&h=800&fit=contain&output=jpg&q=85&il&n=-1",
          videoUrl: "https://www.youtube.com/watch?v=evIGdOzKCYk&list=PLTb8yNz82VDW-Ka3DMZUvhf16zZCPFiGe",
        },
        {
          title: "網頁設計基礎",
          language: "HTML/CSS",
          level: "入門",
          details: "學習 HTML5 與 CSS3 製作響應式網頁。",
          category: "前端開發",
          tags: ["HTML", "CSS", "網頁設計"],
          imageUrl:
            "https://images.weserv.nl/?url=i.ytimg.com/vi/6HHN0G2cwBM/sddefault.jpg&w=800&h=800&fit=contain&output=jpg&q=85&il&n=-1",
          videoUrl: "https://www.youtube.com/watch?v=6HHN0G2cwBM",
        },
        {
          title: "Vue.js 前端框架",
          language: "JavaScript",
          level: "進階",
          details: "掌握 Vue.js 元件、資料綁定與路由。",
          category: "前端開發",
          tags: ["Vue.js", "前端", "框架"],
          imageUrl:
            "https://images.weserv.nl/?url=i.ytimg.com/vi/t7Px_M4SbRQ/maxresdefault.jpg&w=800&h=800&fit=contain&output=jpg&q=85&il&n=-1",
          videoUrl: "https://www.youtube.com/watch?v=t7Px_M4SbRQ&list=PL-g0fdC5RMbq2EbkoiXF2vztGEcoDJoH5",
        },
        {
          title: "Flutter 跨平台開發",
          language: "Dart",
          level: "進階",
          details: "使用 Flutter 開發 iOS/Android 跨平台 App。",
          category: "行動開發",
          tags: ["Flutter", "Dart", "跨平台"],
          imageUrl:
            "https://images.weserv.nl/?url=i.ytimg.com/vi/6JcNm-JYZpw/maxresdefault.jpg&w=800&h=800&fit=contain&output=jpg&q=85&il&n=-1",
          videoUrl: "https://www.youtube.com/watch?v=6JcNm-JYZpw",
        },
        {
          title: "機器學習入門",
          language: "Python 3",
          level: "進階",
          details: "機器學習基本概念與 scikit-learn 實作。",
          category: "人工智慧",
          tags: ["機器學習", "AI", "Python"],
          imageUrl:
            "https://images.weserv.nl/?url=i.ytimg.com/vi/wm9yR1VspPs/hqdefault.jpg&w=800&h=800&fit=contain&output=jpg&q=85&il&n=-1",
          videoUrl: "https://www.youtube.com/watch?v=wm9yR1VspPs",
        },
        {
          title: "深度學習基礎",
          language: "Python 3",
          level: "進階",
          details: "深度學習理論與 TensorFlow 實作。",
          category: "人工智慧",
          tags: ["深度學習", "TensorFlow", "AI"],
          imageUrl:
            "https://images.weserv.nl/?url=i.ytimg.com/vi/_PrTJcgKrdk/sddefault.jpg&w=800&h=800&fit=contain&output=jpg&q=85&il&n=-1",
          videoUrl: "https://www.youtube.com/watch?v=PCgea_z8x8w",
        },
        {
          title: "網路安全基礎",
          language: "工具",
          level: "入門",
          details: "資安基本觀念與常見攻擊手法。",
          category: "資安",
          tags: ["資安", "網路安全", "防護"],
          imageUrl:
            "https://images.weserv.nl/?url=i.ytimg.com/vi/Uodr22UUEBk/hq720.jpg&w=800&h=800&fit=contain&output=jpg&q=85&il&n=-1",
          videoUrl: "https://www.youtube.com/watch?v=Uodr22UUEBk",
        },
        {
          title: "雲端運算與 AWS",
          language: "工具",
          level: "進階",
          details: "AWS 雲端服務與部署實務。",
          category: "雲端",
          tags: ["AWS", "雲端", "部署"],
          imageUrl:
            "https://images.weserv.nl/?url=i.ytimg.com/vi/Uv-e1RO0lrg/maxresdefault.jpg&w=800&h=800&fit=contain&output=jpg&q=85&il&n=-1",
          videoUrl: "https://www.youtube.com/watch?v=Uv-e1RO0lrg",
        },
        {
          title: "資料視覺化",
          language: "Python 3",
          level: "進階",
          details: "使用 Matplotlib、Seaborn 製作圖表。",
          category: "資料分析",
          tags: ["資料視覺化", "Python", "圖表"],
          imageUrl:
            "https://images.weserv.nl/?url=i.ytimg.com/vi/p4pqSTANWRo/maxresdefault.jpg&w=800&h=800&fit=contain&output=jpg&q=85&il&n=-1",
          videoUrl: "https://www.youtube.com/watch?v=p4pqSTANWRo",
        },
      ];

      // 狀態
      let currentCategory = "";
      let currentSearch = "";

      // 過濾資料
      function filterItems() {
        return items.filter((item) => {
          const categoryMatch =
            !currentCategory ||
            currentCategory === "" ||
            currentCategory === "全部" ||
            item.category === currentCategory;
          const search = currentSearch.trim().toLowerCase();
          if (!search) return categoryMatch;
          const inTitle = item.title.toLowerCase().includes(search);
          const inTags = item.tags.some((tag) =>
            tag.toLowerCase().includes(search)
          );
          const inDetails = item.details.toLowerCase().includes(search);
          const inLang = item.language.toLowerCase().includes(search);
          return categoryMatch && (inTitle || inTags || inDetails || inLang);
        });
      }

      function getYouTubeId(url) {
        try {
          const u = new URL(url);
          if (u.hostname.includes("youtube.com") && u.searchParams.get("v")) {
            return u.searchParams.get("v");
          }
          if (u.hostname === "youtu.be") {
            return u.pathname.slice(1);
          }
        } catch (e) {}
        return null;
      }

      function groupByLanguage(items) {
        const groups = {};
        items.forEach(item => {
          if (!groups[item.language]) groups[item.language] = [];
          groups[item.language].push(item);
        });
        return groups;
      }

      function getLanguageColor(lang) {
        // 可根據語言自訂顏色
        const map = {
          "Python 3": "#3572A5",
          "JavaScript": "#F7DF1E",
          "Kotlin": "#7F52FF",
          "Swift": "#FA7343",
          "SQL": "#e38c00",
          "Linux": "#333",
          "C++": "#00599C",
          "Java": "#b07219",
          "HTML/CSS": "#e34c26",
          "Dart": "#0175C2",
          "工具": "#888",
        };
        return map[lang] || "#666";
      }

      function updateList() {
        const list = document.querySelector("ion-list");
        list.innerHTML = "";
        const filtered = filterItems();
        if (filtered.length === 0) {
          list.innerHTML = `<ion-item><div style="width:100%;text-align:center;color:#888;">查無資料</div></ion-item>`;
          return;
        }
        const groups = groupByLanguage(filtered);
        Object.keys(groups).forEach(lang => {
          // 語言分組標題
          const header = document.createElement("div");
          header.className = "lang-header";
          header.style.background = getLanguageColor(lang);
          header.style.color = "#fff";
          header.style.fontWeight = "bold";
          header.style.fontSize = "1.15em";
          header.style.padding = "0.5em 1em";
          header.style.margin = "1.2em 0 0.5em 0";
          header.style.borderRadius = "8px";
          header.textContent = lang;
          list.appendChild(header);

          groups[lang].forEach((item) => {
            const ionItem = document.createElement("ion-item");
            ionItem.style.alignItems = "flex-start";
            const ytId = getYouTubeId(item.videoUrl);
            ionItem.innerHTML = `
              <div class="item-content">
                <div class="item-title">${item.title}</div>
                <div class="item-subtitle">${item.language}｜${item.level}</div>
                <div class="item-details">${item.details}</div>
                <div class="tag-container">
                  <ion-chip color="primary" size="small">${item.category}</ion-chip>
                  ${item.tags
                    .map(
                      (tag) =>
                        `<ion-chip size="small" color="secondary">${tag}</ion-chip>`
                    )
                    .join("")}
                </div>
                <div class="media-container">
                  <img class="media-img" src="${item.imageUrl}" alt="${item.title}" loading="lazy" />
                  ${
                    ytId
                      ? `<iframe class="media-iframe" src="https://www.youtube.com/embed/${ytId}" frameborder="0" allowfullscreen title="YouTube影片"></iframe>`
                      : `<video class="media-video" src="${item.videoUrl}" controls></video>`
                  }
                </div>
              </div>
            `;
            list.appendChild(ionItem);
          });
        });
      }

      function updateCategoryOptions() {
        const select = document.querySelector("ion-select");
        const categories = Array.from(new Set(items.map((i) => i.category)));
        select.innerHTML =
          `<ion-select-option value="">全部</ion-select-option>` +
          categories
            .map(
              (c) => `<ion-select-option value="${c}">${c}</ion-select-option>`
            )
            .join("");
      }

      document.addEventListener("DOMContentLoaded", () => {
        updateCategoryOptions();
        updateList();

        const searchbar = document.querySelector("ion-searchbar");
        searchbar.addEventListener("ionInput", (event) => {
          currentSearch = event.target.value || "";
          updateList();
        });

        const categorySelect = document.querySelector("ion-select");
        categorySelect.addEventListener("ionChange", (event) => {
          currentCategory = event.target.value;
          updateList();
        });
      });
    </script>
  </body>
</html>
