<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>主題清單</title>
    <!-- Ionic CDN -->
    <script
      type="module"
      src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.esm.js"
    ></script>
    <script
      nomodule
      src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.js"
    ></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@ionic/core/css/ionic.bundle.css"
    />
    <style>
      .item-content {
        width: 100%;
      }
      .item-title {
        font-weight: bold;
        margin: 0.25rem 0;
      }
      .item-subtitle {
        color: var(--ion-color-medium);
        font-size: 0.9em;
      }
      .tag-container {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-top: 0.5rem;
      }
    </style>
  </head>
  <body>
    <ion-app>
      <ion-header>
        <ion-toolbar>
          <ion-title>主題清單</ion-title>
        </ion-toolbar>
        <ion-searchbar placeholder="搜尋..."></ion-searchbar>
        <ion-item>
          <ion-select label="分類" interface="popover">
            <ion-select-option value="">全部</ion-select-option>
            <!-- 根據主題加入分類選項 -->
          </ion-select>
        </ion-item>
      </ion-header>

      <ion-content>
        <ion-list>
          <!-- 清單項目範本 -->
          <ion-item class="list-item">
            <div class="item-content">
              <div class="item-title">標題</div>
              <div class="item-subtitle">副標題</div>
              <div class="item-details">詳細資訊</div>
              <div class="tag-container">
                <ion-chip size="small">分類</ion-chip>
                <!-- 標籤 -->
              </div>
            </div>
          </ion-item>
        </ion-list>
      </ion-content>
    </ion-app>
  </body>

  <script>
    // 初始化資料
    const items = [
      {
        title: "Python 基礎入門", // 主標題
        language: "Python 3", // 程式語言
        level: "入門", // 程度
        details:
          "從零開始學習 Python 程式設計，包含變數、流程控制、函式等基礎概念。", // 重點
        category: "程式入門", // 分類
        tags: ["Python", "程式設計", "入門課程"], // 標籤陣列
        imageUrl:
          "https://oss.py.cn/pycn/upload/course/000/000/003/5a162d633d57b659.jpg", // 課程封面圖
        videoUrl:
          "https://www.youtube.com/watch?v=pD4Ga6aIN0c&list=PL91gvBcdjUtaBRJTeCK-iVKspBvqcESlJ", // 教學影片（本地檔案或 YouTube ID）
      },
      // ... 更多課程資料
      {
        title: "JavaScript 前端開發",
        language: "JavaScript",
        level: "入門",
        details: "學習網頁互動、DOM 操作與 ES6 語法。",
        category: "前端開發",
        tags: ["JavaScript", "網頁", "前端"],
        imageUrl: "images/js-frontend.jpg",
        videoUrl: "videos/js-frontend.mp4",
      },
      {
        title: "React 基礎實作",
        language: "JavaScript",
        level: "進階",
        details: "掌握 React 元件、props、state 與生命週期。",
        category: "前端開發",
        tags: ["React", "前端", "元件化"],
        imageUrl: "images/react-basic.jpg",
        videoUrl: "videos/react-basic.mp4",
      },
      {
        title: "資料結構與演算法",
        language: "Python 3",
        level: "進階",
        details: "介紹常見資料結構與演算法，提升解題能力。",
        category: "演算法",
        tags: ["資料結構", "演算法", "LeetCode"],
        imageUrl: "images/algorithm.jpg",
        videoUrl: "videos/algorithm.mp4",
      },
      {
        title: "Android App 開發",
        language: "Kotlin",
        level: "入門",
        details: "使用 Kotlin 開發 Android 行動應用程式。",
        category: "行動開發",
        tags: ["Android", "Kotlin", "App"],
        imageUrl: "images/android.jpg",
        videoUrl: "videos/android.mp4",
      },
      {
        title: "iOS App 開發",
        language: "Swift",
        level: "入門",
        details: "學習 Swift 與 iOS App 開發基礎。",
        category: "行動開發",
        tags: ["iOS", "Swift", "App"],
        imageUrl: "images/ios.jpg",
        videoUrl: "videos/ios.mp4",
      },
      {
        title: "資料庫設計與 SQL",
        language: "SQL",
        level: "入門",
        details: "學習資料庫設計、查詢語法與資料操作。",
        category: "資料庫",
        tags: ["SQL", "資料庫", "查詢"],
        imageUrl: "images/sql.jpg",
        videoUrl: "videos/sql.mp4",
      },
      {
        title: "Node.js 後端開發",
        language: "JavaScript",
        level: "進階",
        details: "使用 Node.js 建立 RESTful API 與伺服器應用。",
        category: "後端開發",
        tags: ["Node.js", "API", "後端"],
        imageUrl: "images/nodejs.jpg",
        videoUrl: "videos/nodejs.mp4",
      },
      {
        title: "Git 版本控制",
        language: "工具",
        level: "入門",
        details: "學習 Git 基本指令與版本管理流程。",
        category: "工具",
        tags: ["Git", "版本控制", "協作"],
        imageUrl: "images/git.jpg",
        videoUrl: "videos/git.mp4",
      },
      {
        title: "Linux 系統操作",
        language: "Linux",
        level: "入門",
        details: "掌握 Linux 常用指令與系統管理。",
        category: "系統",
        tags: ["Linux", "系統管理", "命令列"],
        imageUrl: "images/linux.jpg",
        videoUrl: "videos/linux.mp4",
      },
      {
        title: "C++ 程式設計",
        language: "C++",
        level: "入門",
        details: "學習 C++ 基礎語法與物件導向設計。",
        category: "程式入門",
        tags: ["C++", "物件導向", "程式設計"],
        imageUrl: "images/cpp.jpg",
        videoUrl: "videos/cpp.mp4",
      },
      {
        title: "Java 程式設計",
        language: "Java",
        level: "入門",
        details: "Java 語法、類別、物件與例外處理。",
        category: "程式入門",
        tags: ["Java", "物件導向", "程式設計"],
        imageUrl: "images/java.jpg",
        videoUrl: "videos/java.mp4",
      },
      {
        title: "網頁設計基礎",
        language: "HTML/CSS",
        level: "入門",
        details: "學習 HTML5 與 CSS3 製作響應式網頁。",
        category: "前端開發",
        tags: ["HTML", "CSS", "網頁設計"],
        imageUrl: "images/web-design.jpg",
        videoUrl: "videos/web-design.mp4",
      },
      {
        title: "Vue.js 前端框架",
        language: "JavaScript",
        level: "進階",
        details: "掌握 Vue.js 元件、資料綁定與路由。",
        category: "前端開發",
        tags: ["Vue.js", "前端", "框架"],
        imageUrl: "images/vue.jpg",
        videoUrl: "videos/vue.mp4",
      },
      {
        title: "Flutter 跨平台開發",
        language: "Dart",
        level: "進階",
        details: "使用 Flutter 開發 iOS/Android 跨平台 App。",
        category: "行動開發",
        tags: ["Flutter", "Dart", "跨平台"],
        imageUrl: "images/flutter.jpg",
        videoUrl: "videos/flutter.mp4",
      },
      {
        title: "機器學習入門",
        language: "Python 3",
        level: "進階",
        details: "機器學習基本概念與 scikit-learn 實作。",
        category: "人工智慧",
        tags: ["機器學習", "AI", "Python"],
        imageUrl: "images/ml.jpg",
        videoUrl: "videos/ml.mp4",
      },
      {
        title: "深度學習基礎",
        language: "Python 3",
        level: "進階",
        details: "深度學習理論與 TensorFlow 實作。",
        category: "人工智慧",
        tags: ["深度學習", "TensorFlow", "AI"],
        imageUrl: "images/dl.jpg",
        videoUrl: "videos/dl.mp4",
      },
      {
        title: "網路安全基礎",
        language: "工具",
        level: "入門",
        details: "資安基本觀念與常見攻擊手法。",
        category: "資安",
        tags: ["資安", "網路安全", "防護"],
        imageUrl: "images/security.jpg",
        videoUrl: "videos/security.mp4",
      },
      {
        title: "雲端運算與 AWS",
        language: "工具",
        level: "進階",
        details: "AWS 雲端服務與部署實務。",
        category: "雲端",
        tags: ["AWS", "雲端", "部署"],
        imageUrl: "images/aws.jpg",
        videoUrl: "videos/aws.mp4",
      },
      {
        title: "資料視覺化",
        language: "Python 3",
        level: "進階",
        details: "使用 Matplotlib、Seaborn 製作圖表。",
        category: "資料分析",
        tags: ["資料視覺化", "Python", "圖表"],
        imageUrl: "images/dataviz.jpg",
        videoUrl: "videos/dataviz.mp4",
      },
    ];

    // 更新清單顯示
    function updateList() {
      const list = document.querySelector("ion-list");
      list.innerHTML = "";
      items.forEach((item) => {
        const ionItem = document.createElement("ion-item");
        ionItem.innerHTML = `
        <ion-thumbnail slot="start">
          <ion-img src="${item.imageUrl}" alt="${item.title}"></ion-img>
        </ion-thumbnail>
        <div class="item-content">
          <div class="item-title">${item.title}</div>
          <div class="item-subtitle">${item.language}｜${item.level}</div>
          <div class="item-details">${item.details}</div>
          <div class="tag-container">
            <ion-chip color="primary" size="small">${item.category}</ion-chip>
            ${item.tags
              .map(
                (tag) =>
                  `<ion-chip size="small" color="secondary">${tag}</ion-chip>`
              )
              .join("")}
          </div>
          <div style="margin-top:0.5rem;">
          <video src="${
            item.videoUrl
          }" controls width="200" style="max-width:100%;border-radius:8px;"></video>
          </div>
        </div>
    `;
        list.appendChild(ionItem);
      });
    }

    let currentCategory = "";
    let currentSearch = "";

    function filterItems() {
      return items.filter((item) => {
        // 分類過濾
        const categoryMatch =
          !currentCategory ||
          currentCategory === "" ||
          currentCategory === "全部" ||
          item.category === currentCategory;
        // 關鍵字過濾
        const search = currentSearch.trim().toLowerCase();
        if (!search) return categoryMatch;
        const inTitle = item.title.toLowerCase().includes(search);
        const inTags = item.tags.some((tag) =>
          tag.toLowerCase().includes(search)
        );
        return categoryMatch && (inTitle || inTags);
      });
    }

    function updateList() {
      const list = document.querySelector("ion-list");
      list.innerHTML = "";
      filterItems().forEach((item) => {
        const ionItem = document.createElement("ion-item");
        ionItem.innerHTML = `
      <ion-thumbnail slot="start">
        <ion-img src="${item.imageUrl}" alt="${item.title}"></ion-img>
      </ion-thumbnail>
      <div class="item-content">
        <div class="item-title">${item.title}</div>
        <div class="item-subtitle">${item.language}｜${item.level}</div>
        <div class="item-details">${item.details}</div>
        <div class="tag-container">
          <ion-chip color="primary" size="small">${item.category}</ion-chip>
          ${item.tags
            .map(
              (tag) =>
                `<ion-chip size="small" color="secondary">${tag}</ion-chip>`
            )
            .join("")}
        </div>
        <div style="margin-top:0.5rem;">
          <video src="${
            item.videoUrl
          }" controls width="200" style="max-width:100%;border-radius:8px;"></video>
        </div>
      </div>
    `;
        list.appendChild(ionItem);
      });
    }

    // 初始化分類選單
    function updateCategoryOptions() {
      const select = document.querySelector("ion-select");
      const categories = Array.from(new Set(items.map((i) => i.category)));
      select.innerHTML =
        `<ion-select-option value="">全部</ion-select-option>` +
        categories
          .map(
            (c) => `<ion-select-option value="${c}">${c}</ion-select-option>`
          )
          .join("");
    }
    updateCategoryOptions();

    const searchbar = document.querySelector("ion-searchbar");
    searchbar.addEventListener("ionInput", (event) => {
      currentSearch = event.target.value || "";
      updateList();
    });

    const categorySelect = document.querySelector("ion-select");
    categorySelect.addEventListener("ionChange", (event) => {
      currentCategory = event.target.value;
      updateList();
    });

    updateList();
  </script>
</html>
